{% extends 'base.html' %}
{% block head %}
{% load static %}
  <link href={% static "paca_app/calendar/fullcalendar.min.css"%} rel='stylesheet' />
  <link href={% static "paca_app/calendar/fullcalendar.print.min.css"%} rel='stylesheet' media='print' />
  <script src={% static "paca_app/calendar/moment.min.js"%}></script>
  <script src={% static "paca_app/calendar/jquery.min.js"%}></script>
  <script src={% static "paca_app/calendar/fullcalendar.min.js"%}></script>

{% endblock %}
{% block content %}
  <div id="calendar"></div>
  <script>
//   // Create calendar when document is ready
// $(document).ready(function() {



  $('#calendar').fullCalendar({
                  header: {
                      left: 'month,agendaWeek,agendaDay',
                      center: 'title',
                      right: 'prevYear,prev,next,nextYear'
                  },
                  timeFormat: 'H:mm',
                  eventsLimit: 'True',
                  eventSources: [
                      {
                          url: '/get_jobs',
                      }
                  ],

                  dayClick: function( date, jsEvent) {
                      var chosenDate = date.format();
                      $("#start").val(chosenDate);
                      $("#end").val(chosenDate);
                      $("#exampleModal").modal("show");
                  }

              });
              // Add event
              $("#save_jobs").on("click", function() {
                  var title = $("#title").val();
                  var start = $("#start").val();
                  var end = $("#end").val();
                  $.ajax({
                      url: "/save_jobs",
                      type: "POST",
                      data: {
                          start: start,
                          end: end,
                          title: title
                      },
                      dataType: "JSON"
                  }).done(function(data){
                      $("#calendar").fullCalendar("renderEvent", data);
                      $("#exampleModal").modal("hide");
                  });
              });


   // This is the callback that will be triggered when a selection is made.
   // It gets start and end date/time as part of its arguments
//    select: function(start, end, jsEvent, view) {
//
//      // Ask for a title. If empty it will default to "New event"
//      title = "Arbetspass";
//      // If did not pressed Cancel button
//      if (title != null) {
//       // Create event
//       var event = {
//        title: title.trim() != "" ? title : "Arbetspass",
//        start: start,
//        end: end,
//        color: "darkBlue",
//        textColor: "white"
//       };
//
//       $calendar.fullCalendar("renderEvent", event, true);
//      };
//      // Whatever happens, unselect selection
//      $calendar.fullCalendar("unselect");
//
//     }, // End select callback
//
//     // Make events editable, globally
//     editable : true,
//     // Callback triggered just before an event is rendered
//     eventRender: function(event, element){
//             $(element).find(".fc-content").append("<div style='float:right'><a class='delete-link' href='javascript:remove_event(\""
//             + event._id + "\")'>Delete</a></div>");
//
//     }, // End callback eventRender
//
//   } // End of calendar options
//  );
//
//
// });
//
// var $calendar = $("#calendar").fullCalendar("getCalendar");
//
// function remove_event(eventID){
//     var remove = confirm("Remove event ID " + eventID + "?");
//
//     if(remove == true){
//         $calendar.fullCalendar("removeEvents", eventID);
//         $calendar.fullCalendar("refreshEvents")
//     };
//
// };

</script>
{% endblock %}
